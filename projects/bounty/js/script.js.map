{"version":3,"file":"script.js","mappings":"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","sources":["webpack://it-work/./src/js/script.js"],"sourcesContent":["'use strict';\r\n\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n    const name = document.querySelectorAll('.rating__input-name'),\r\n          score = document.querySelectorAll('.rating__input');\r\n\r\n    \r\n\r\n    const data = new Promise((resolve, reject) => {\r\n        fetch('./db.json')\r\n            .then(response => response.json())\r\n            .then(result => resolve(result))\r\n            .catch(err => console.log(err));\r\n    });\r\n\r\n    data.then((res) => {\r\n        let readyData = sortData(res.data);\r\n        recordValue(readyData);\r\n\r\n        name.forEach(item => {\r\n            item.addEventListener('focus', (e) => {\r\n                const oldValue = e.target.textContent;\r\n                e.target.addEventListener('blur', (event) => {\r\n                    if (!(oldValue === event.target.textContent.toUpperCase())) { \r\n                        loop1: for (let i = 0; i < readyData.length; i++) {\r\n                            if (readyData[i].includes(event.target.textContent.toUpperCase())) {\r\n                                break loop1;\r\n                            } else if (readyData[i].includes(oldValue)) {\r\n                                readyData[i][0] = event.target.textContent.toUpperCase();\r\n                                sendData(readyData);\r\n                                break loop1;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });   \r\n        \r\n        score.forEach(item => {\r\n            item.addEventListener('focus', (e) => {\r\n                const oldValue = e.target.textContent;\r\n                e.target.addEventListener('blur', (event) => {\r\n                    if ((event.target.textContent.search(/\\D/)) !== -1) {\r\n                        event.target.textContent = 0;\r\n                    }\r\n                    if (!(oldValue === event.target.textContent)) { \r\n                        for (let i = 0; i < readyData.length; i++) {\r\n                            if (readyData[i].includes(e.target.parentElement.previousSibling.firstChild.textContent)) {\r\n                                readyData[i][1] = event.target.textContent;\r\n                                readyData = sortData(readyData);\r\n                                recordValue(readyData);\r\n                                sendData(readyData);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        });\r\n\r\n\r\n    });\r\n\r\n    function sortData(dataArr) {\r\n        let sortArr = [];\r\n        while (dataArr.length !== 0) {\r\n            let max = dataArr[0];\r\n            dataArr.forEach(item => {\r\n                if ((+item[1]) > (+max[1])) {\r\n                    max = item;\r\n                }\r\n            });\r\n            sortArr.push(max);\r\n            dataArr.splice(dataArr.indexOf(max), 1);\r\n        }\r\n        return sortArr;\r\n    }\r\n\r\n    function recordValue(mainData) {\r\n        mainData.forEach((item, i) => {\r\n            name[i].textContent = item[0];\r\n            score[i].textContent = item[1];\r\n        });\r\n    }\r\n\r\n    async function sendData(info) {\r\n        const dataObj = {\r\n            data: info\r\n        };\r\n        const res = await fetch('php/update.php', {\r\n            method: 'POST',\r\n            headers: {\r\n\t\t\t\t\"Content-type\": \"application/json; charset=utf-8\"\r\n\t\t\t},\r\n            body: JSON.stringify(dataObj)\r\n        }).then(res => res.text())\r\n        .then(resp => console.log(resp))\r\n        .catch(err => console.log(err));\r\n    }\r\n    \r\n});"],"names":["window","addEventListener","name","document","querySelectorAll","score","data","Promise","resolve","reject","fetch","then","response","json","result","catch","err","console","log","res","readyData","sortData","recordValue","forEach","item","e","oldValue","target","textContent","event","toUpperCase","loop1","i","length","includes","sendData","search","parentElement","previousSibling","firstChild","dataArr","sortArr","max","push","splice","indexOf","mainData","info","dataObj","method","headers","body","JSON","stringify","text","resp"],"sourceRoot":""}